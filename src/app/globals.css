@import "tailwindcss";

/* Only hide navigation when reading interface is in fullscreen mode */
body:has(.netflix-reading-container.fullscreen-mode) header[class*="sticky top-0 z-50"] {
	visibility: hidden !important;
	z-index: -1 !important;
}

/* Ensure reading container has solid background only in fullscreen */
.netflix-reading-container.fullscreen-mode {
	background-color: black !important;
}

:root {
	/* PrimaryReading Brand Colors - Design System Aligned */
	--education-blue: #3b82f6;
	--education-purple: #8b5cf6;
	--education-pink: #ec4899;
	--education-indigo: #6366f1;
	--warm-orange: #ff8c42;
	--soft-yellow: #ffd93d;
	--sage-green: #6ee7b7;
	--coral-pink: #ff7b9d;

	/* Enhanced Neutrals - WCAG AA Compliant */
	--background: #fafbfc;
	--foreground: #0f172a; /* Improved contrast from #1f2937 */
	--muted: #1e293b; /* Improved contrast from #374151 for better readability */
	--muted-foreground: #475569; /* WCAG AA compliant muted text */
	--border: #e5e7eb;
	--card: #ffffff;
	--card-hover: #f9fafb;

	/* Text Contrast Colors - Educational Focus */
	--text-primary: #0f172a; /* High contrast for primary text */
	--text-secondary: #334155; /* 4.5:1+ contrast for secondary text */
	--text-muted: #475569; /* 4.5:1+ contrast for muted text */
	--placeholder: #64748b; /* Enhanced placeholder contrast */

	/* Semantic Colors - Brand Aligned */
	--primary: var(--education-blue);
	--primary-hover: var(--education-purple);
	--secondary: var(--education-pink);
	--success: var(--sage-green);
	--warning: var(--soft-yellow);
	--error: var(--coral-pink);

	/* Child-Friendly Typography System */
	--font-primary: 'Comic Neue', 'Quicksand', 'Nunito', 'Inter', sans-serif;
	--font-display: 'Fredoka', 'Comic Neue', 'Quicksand', sans-serif;
	--font-mono: 'JetBrains Mono', 'Fira Code', monospace;

	/* Legacy compatibility (keeping for existing CSS) */
	--font-sans: var(--font-primary);
	--font-reading: var(--font-primary);
	--font-heading: var(--font-display);
}

@theme inline {
	--color-primary: var(--primary);
	--color-primary-hover: var(--primary-hover);
	--color-secondary: var(--secondary);
	--color-success: var(--success);
	--color-warning: var(--warning);
	--color-error: var(--error);
	--color-background: var(--background);
	--color-foreground: var(--foreground);
	--color-muted: var(--muted);
	--color-border: var(--border);
	--color-card: var(--card);
	--color-card-hover: var(--card-hover);
	--font-sans: var(--font-sans);
	--font-reading: var(--font-reading);
	--font-heading: var(--font-heading);

	/* Ello-style generous rounded corners for child-friendliness */
	--radius: 16px;
	--radius-large: 24px;
	--radius-button: 20px;
}

html,
body {
	background: var(--background);
	color: var(--foreground);
	font-family: var(--font-primary);
	line-height: 1.6;
	overflow-x: hidden; /* Prevent horizontal scrollbars */
	max-width: 100vw; /* Ensure content doesn't exceed viewport width */
	box-sizing: border-box;
	letter-spacing: 0.01em; /* Slight letter spacing for better readability */
}

/* Apply child-friendly fonts to all text elements */
h1, h2, h3, h4, h5, h6 {
	font-family: var(--font-display);
	font-weight: 600;
	letter-spacing: -0.01em;
}

p, span, div, button, input, textarea, label {
	font-family: var(--font-primary);
}

/* Numbers and metrics get the display font for visual impact */
.metric-number, .text-6xl, .text-5xl, .text-4xl {
	font-family: var(--font-display);
}

/* Navigation elements */
nav, .nav-text {
	font-family: var(--font-primary);
	font-weight: 500;
}

/* Prevent scrollbars in reading interface */
body:has(.netflix-reading-container:not(.fullscreen-mode)) {
	height: 100vh;
	max-height: 100vh;
	overflow: hidden;
}

/* Adjust layout wrapper height for reading pages */
body:has(.netflix-reading-container:not(.fullscreen-mode)) .flex.min-h-screen {
	min-height: calc(100vh - 0px); /* Remove min-height requirement */
	height: 100vh;
	max-height: 100vh;
}

*,
*::before,
*::after {
	box-sizing: border-box;
}

/* Child-friendly styles */
.reading-text {
	font-family: var(--font-reading);
	font-size: 1.125rem;
	line-height: 1.8;
	letter-spacing: 0.025em;
}

/* Ensure all story sections look consistent */
.reading-text * {
	font-family: var(--font-reading) !important;
	font-weight: 400 !important;
	color: var(--foreground) !important;
	font-size: 1.125rem !important;
	text-align: left !important;
}

/* Netflix-style reading interface styles */
.netflix-reading-container {
	font-family: var(--font-sans);
}

.netflix-reading-container .reading-text {
	font-family: var(--font-reading);
	line-height: 1.8;
	text-shadow: 0 2px 4px rgba(0, 0, 0, 0.7);
	color: white !important;
}

/* Ensure all text elements are white in Netflix interface */
.netflix-reading-container .reading-text * {
	color: white !important;
	font-family: var(--font-reading) !important;
	text-shadow: 0 2px 4px rgba(0, 0, 0, 0.7) !important;
}

/* Override any color classes to ensure white text */
.netflix-reading-container .text-white {
	color: white !important;
}

.netflix-reading-container .text-white\/95 {
	color: rgba(255, 255, 255, 0.95) !important;
}

.netflix-reading-container .text-white\/90 {
	color: rgba(255, 255, 255, 0.90) !important;
}

.netflix-reading-container .text-white\/80 {
	color: rgba(255, 255, 255, 0.80) !important;
}

.netflix-text-container {
	animation: fadeInUp 0.6s ease-out;
	transition: all 0.3s ease-in-out;
}

.netflix-text-container:hover {
	transform: translateY(-2px);
	box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

/* Smooth background transitions */
.netflix-reading-container .absolute.inset-0 > div[style*="background-image"] {
	transition: opacity 1000ms ease-in-out, transform 1000ms ease-in-out;
}

/* Enhanced button styling for Netflix theme */
.netflix-reading-container button {
	transition: all 0.2s ease-in-out;
	backdrop-filter: blur(8px);
}

.netflix-reading-container button:hover {
	transform: translateY(-1px);
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

/* Progress bar styling */
.netflix-reading-container .bg-white.h-2 {
	box-shadow: 0 2px 8px rgba(255, 255, 255, 0.3);
}

/* Reading tip animation */
.netflix-reading-container .bg-black\/60 {
	animation: fadeInUp 0.8s ease-out 0.5s both;
}

/* Responsive text sizing */
@media (max-width: 640px) {
	.netflix-text-container {
		padding: 1.5rem;
		margin: 0 1rem;
	}
	
	.netflix-reading-container .text-lg {
		font-size: 1rem !important;
	}
	
	.netflix-reading-container .text-xl {
		font-size: 1.125rem !important;
	}
	
	.netflix-reading-container .text-3xl {
		font-size: 1.5rem !important;
	}
	
	.netflix-reading-container .text-4xl {
		font-size: 2rem !important;
	}
}

/* Animation keyframes */
@keyframes fadeInUp {
	from {
		opacity: 0;
		transform: translateY(30px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

/* Floating animation for books and elements */
@keyframes float {
	0%, 100% {
		transform: translateY(0px) rotate(0deg);
	}
	50% {
		transform: translateY(-10px) rotate(2deg);
	}
}

@keyframes floatReverse {
	0%, 100% {
		transform: translateY(0px) rotate(0deg);
	}
	50% {
		transform: translateY(-8px) rotate(-2deg);
	}
}

/* Gentle rotation for magical elements */
@keyframes gentleRotate {
	0% {
		transform: rotate(0deg) scale(1);
	}
	25% {
		transform: rotate(2deg) scale(1.05);
	}
	50% {
		transform: rotate(0deg) scale(1);
	}
	75% {
		transform: rotate(-2deg) scale(1.05);
	}
	100% {
		transform: rotate(0deg) scale(1);
	}
}

/* Hero content animation */
@keyframes heroContentSlide {
	from {
		opacity: 0;
		transform: translateY(40px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

/* Child-friendly floating animations for mobile hero */
@keyframes float-delayed {
	0%, 100% {
		transform: translateY(0px) rotate(0deg);
	}
	50% {
		transform: translateY(-12px) rotate(3deg);
	}
}

@keyframes bounce-slow {
	0%, 100% {
		transform: translateY(0px) scale(1);
	}
	25% {
		transform: translateY(-8px) scale(1.05);
	}
	50% {
		transform: translateY(0px) scale(1);
	}
	75% {
		transform: translateY(-4px) scale(1.02);
	}
}

/* Apply animations with proper timing */
.animate-float {
	animation: float 4s ease-in-out infinite;
}

.animate-float-delayed {
	animation: float-delayed 5s ease-in-out infinite;
	animation-delay: 1s;
}

.animate-bounce-slow {
	animation: bounce-slow 3s ease-in-out infinite;
	animation-delay: 0.5s;
}

/* Pulsing glow for interactive elements */
@keyframes pulseGlow {
	0%, 100% {
		box-shadow: 0 0 10px rgba(40, 184, 184, 0.3);
	}
	50% {
		box-shadow: 0 0 20px rgba(40, 184, 184, 0.6);
	}
}

/* Hero image optimization */
.hero-asset {
	image-rendering: -webkit-optimize-contrast;
	image-rendering: crisp-edges;
	transform-origin: center;
	will-change: transform;
	backface-visibility: hidden;
	-webkit-backface-visibility: hidden;
}

/* Smooth image transitions */
.hero-asset img {
	transition: opacity 0.3s ease-in-out;
}

/* Performance optimizations for animations */
.floating-element {
	transform: translateZ(0);
	-webkit-transform: translateZ(0);
	will-change: transform;
}

/* Mobile-specific optimizations */
.netflix-reading-container {
	/* Ensure proper mobile viewport handling */
	width: 100vw;
	height: 100vh;
	min-height: 100vh;
	min-height: 100dvh; /* Use dynamic viewport height on supported browsers */
	overflow-x: hidden;
}

.netflix-text-container {
	/* Better text rendering on mobile */
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	text-rendering: optimizeReadability;
	
	/* Ensure text container is properly sized on mobile */
	min-height: 120px;
	max-height: 70vh;
	overflow-y: auto;
}

/* Mobile-first touch targets */
.mobile-touch-target {
	min-height: 44px !important;
	min-width: 44px !important;
	touch-action: manipulation;
}

/* Enhanced text readability on mobile */
.reading-text {
	line-height: 1.7;
	word-spacing: 0.1em;
	letter-spacing: 0.01em;
}

/* Safe area handling for devices with notches */
.pb-safe {
	padding-bottom: env(safe-area-inset-bottom);
}

.pt-safe {
	padding-top: env(safe-area-inset-top);
}

/* Better focus indicators for accessibility */
.focus-visible:focus-visible {
	outline: 2px solid var(--education-blue);
	outline-offset: 2px;
}

/* Prevent text selection on UI controls */
.select-none-ui {
	-webkit-user-select: none;
	-moz-user-select: none;
	user-select: none;
}

/* Improve tap response */
.tap-highlight-none {
	-webkit-tap-highlight-color: transparent;
}

/* Enhanced Accessibility improvements */
@media (prefers-reduced-motion: reduce) {
	.netflix-reading-container *,
	.floating-element,
	.hero-asset,
	*[style*="animation"] {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
		animation-play-state: paused !important;
	}

	/* Keep static transforms but remove animation */
	.floating-element {
		transform: none !important;
	}

	/* Reduce bouncing and floating effects */
	.animate-bounce,
	.animate-ping,
	.animate-pulse {
		animation: none !important;
	}
}

/* High contrast mode support */
@media (prefers-contrast: high) {
	.netflix-reading-container .bg-black\/50 {
		background-color: rgba(0, 0, 0, 0.9);
		border: 2px solid white;
	}

	.netflix-reading-container .text-white\/95 {
		color: white !important;
	}

	.netflix-reading-container .text-white\/80 {
		color: white !important;
	}

	/* Enhanced contrast for hero section */
	.hero-asset {
		filter: contrast(1.2) brightness(1.1);
	}

	/* Better text contrast */
	h1, h2, h3, .text-gray-900 {
		color: #000000 !important;
	}

	/* Button contrast */
	button {
		border: 2px solid currentColor !important;
	}
}

/* Focus indicators for better accessibility */
.hero-asset:focus,
button:focus,
a:focus {
	outline: 3px solid #3b82f6;
	outline-offset: 2px;
	border-radius: 4px;
}

/* Ensure minimum touch target sizes */
.hero-asset,
button,
.floating-element {
	min-width: 44px;
	min-height: 44px;
}

/* Age-appropriate cognitive load management */
/* Hide complex elements for younger children on smaller screens (mobile-first approach) */
@media (max-width: 640px) {
	/* Reduce cognitive load by hiding some floating elements */
	.floating-element:nth-child(n+7) {
		display: none;
	}

	/* Slower animations for better processing */
	.floating-element,
	.hero-asset {
		animation-duration: 8s !important;
	}

	/* Larger, simpler elements for easier interaction */
	.hero-asset img {
		transform: scale(1.2);
	}

	/* Reduce sparkle effects */
	.animate-ping:nth-child(n+3) {
		display: none;
	}
}

/* Medium screens - balanced complexity */
@media (min-width: 641px) and (max-width: 1024px) {
	.floating-element:nth-child(n+9) {
		display: none;
	}
}

/* Age-specific optimizations via CSS custom properties */
.age-friendly-5-7 {
	/* Slower, more deliberate animations */
	--animation-speed: 8s;
	--element-scale: 1.3;
	--reduced-complexity: true;
}

.age-friendly-8-11 {
	/* Standard complexity and speed */
	--animation-speed: 4s;
	--element-scale: 1.0;
	--reduced-complexity: false;
}

/* Priority-based element management for cognitive load */
@media (max-width: 640px) {
	/* Hide lower priority elements on mobile for younger users */
	.priority-low {
		display: none;
	}

	.priority-medium {
		opacity: 0.6;
	}

	/* Keep only essential high-priority elements fully visible */
	.priority-high {
		opacity: 1;
	}
}

@media (min-width: 641px) and (max-width: 1024px) {
	/* Gradually reduce opacity for less important elements */
	.priority-low {
		opacity: 0.4;
	}

	.priority-medium {
		opacity: 0.8;
	}
}

/* Cognitive load indicators */
.reduced-animation {
	animation-duration: 8s !important;
	animation-timing-function: ease-in-out !important;
}

/* Full viewport hero arc layout optimizations */
.hero-arc-layout {
	height: 100vh;
	min-height: 100dvh; /* Dynamic viewport height for mobile */
}

/* Arc formation responsive adjustments */
@media (max-width: 768px) {
	/* Mobile: Simplify arc to just 5 main elements */
	.floating-element:nth-child(n+6) {
		display: none !important;
	}

	/* Adjust arc positions for mobile */
	.hero-asset {
		transform: scale(0.8) !important;
	}

	/* Move text higher on mobile for better balance */
	.hero-text-content {
		bottom: 15% !important;
	}
}

@media (min-width: 769px) and (max-width: 1024px) {
	/* Tablet: Show 8 main elements */
	.floating-element:nth-child(n+9) {
		display: none !important;
	}
}

/* Ensure text is readable over the arc */
.hero-text-overlay {
	background: linear-gradient(to top, rgba(248, 249, 250, 0.95) 0%, rgba(248, 249, 250, 0.8) 50%, transparent 100%);
	backdrop-filter: blur(8px);
}
